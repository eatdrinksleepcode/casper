import Casper
import System.IO

packagesDir = Directory('..').Directory('out').Directory('packages')

task CreatePackagesDir:
	packagesDir.Create()

binPath = Path.Combine('bin', 'Release') + Path.DirectorySeparatorChar

task Pack(Exec,
		  DependsOn: [Tasks['Compile'], CreatePackagesDir],
		  Executable: Path.Combine('..', 'nuget.exe'),
		  Arguments: "pack Console.nuspec -OutputDirectory $(packagesDir.Path) -Properties BINPATH=$(binPath)")

parent.Tasks['Build'].DependsOn.Add(Pack)
